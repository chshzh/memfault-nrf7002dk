# App MQTT Echo Test overlay configuration
# Use this overlay to enable MQTT client with TLS encryption and echo test
# (publishes messages and subscribes to the same topic to receive them back)

# Enable app MQTT client feature
CONFIG_APP_MQTT_CLIENT_ENABLED=y
CONFIG_APP_MQTT_CLIENT_BROKER_HOSTNAME="test.mosquitto.org"
CONFIG_APP_MQTT_CLIENT_PUBLISH_TOPIC="Count"
CONFIG_APP_MQTT_CLIENT_PUBLISH_INTERVAL_SEC=300

# App MQTT client logging
CONFIG_APP_MQTT_CLIENT_LOG_LEVEL_INF=y

# MQTT Helper library
CONFIG_MQTT_HELPER=y
CONFIG_MQTT_CLEAN_SESSION=y

# TLS for MQTT
CONFIG_MQTT_LIB_TLS=y
CONFIG_MQTT_HELPER_PORT=8883
# Keepalive reduced to 15s for networks with aggressive NAT timeouts
# Some routers drop idle TCP connections after 20-30 seconds
CONFIG_MQTT_KEEPALIVE=15

# Certificate provisioning - mqtt_helper will auto-provision from cert folder
CONFIG_MQTT_HELPER_SEC_TAG=955
CONFIG_MQTT_HELPER_PROVISION_CERTIFICATES=y
CONFIG_MQTT_HELPER_CERTIFICATES_FOLDER="src/modules/app_mqtt_client/cert"
